<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>PCC Registro</title>

<style>
body { font-family: Arial; margin: 10px; }

.encabezado table { width:100%; border-collapse:collapse; }
.encabezado td { border:2px solid black; padding:8px; }
.logo { width:20%; text-align:center; }
.titulo { width:60%; text-align:center; }
.info { width:20%; text-align:center; background:#cfefff; }

.tabs { display:flex; margin-bottom:10px; }
.tab-btn { flex:1; padding:10px; cursor:pointer; font-weight:bold; }

.tab-content { display:none; }
.tab-content.active { display:block; }

.card-entry { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:10px; }

table { width:100%; border-collapse:collapse; }
th, td { border:1px solid black; padding:6px; text-align:center; }

</style>
</head>

<body>

<!-- ENCABEZADO -->
<div class="encabezado">
<table>
<tr>
<td class="logo">LOGO</td>
<td class="titulo">
<b>SISTEMA DE GESTIÓN DE CALIDAD</b><br>
INSPECCIÓN DE CARCASAS ANTES DEL LAVADO<br>
<b>HACCP - PCC 1 FAENA</b>
</td>
<td class="info">
RG-HCCP - PCC - 307/1<br>
Emisión: 23/02/2026<br>
Rev. 12
</td>
</tr>
</table>
</div>

<!-- BOTONES -->
<div class="tabs">
<button class="tab-btn active" onclick="openTab(event,'tab1')">REGISTRO</button>
<button class="tab-btn" onclick="openTab(event,'tab2')">ACCIONES</button>
</div>

<!-- REGISTRO -->
<div id="tab1" class="tab-content active">

<div class="card-entry">
<input id="in-g" readonly placeholder="Garrón">
<input type="time" id="in-h">
<select id="in-b">
<option value="0">0</option>
<option value="1">1</option>
</select>
<input id="in-r" maxlength="2" placeholder="Resp" oninput="guardar(this)">
</div>

<table>
<thead>
<tr>
<th>GARRÓN</th>
<th>HORA</th>
<th>0/1</th>
<th>RESP</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

</div>

<!-- ACCIONES -->
<div id="tab2" class="tab-content">

<table>
<thead>
<tr>
<th>Detalle</th>
<th>Hora</th>
<th>Acción correctiva</th>
<th>Hora corr.</th>
<th>Restablecimiento</th>
<th>Preventiva</th>
<th>Encargado</th>
</tr>
</thead>
<tbody id="actionsBody"></tbody>
</table>

</div>

<script>

let data = [];

// TAB
function openTab(e,id){
document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

// HORA AUTOMATICA (ARREGLADA)
function capTime(){
let now = new Date();
let h = String(now.getHours()).padStart(2,'0');
let m = String(now.getMinutes()).padStart(2,'0');
document.getElementById('in-h').value = h+":"+m;
}

capTime();

// GUARDAR
function guardar(el){
if(el.value.length==2){

data.push({
g:data.length+1,
h:document.getElementById('in-h').value,
b:document.getElementById('in-b').value,
r:el.value.toUpperCase()
});

el.value="";
render();
capTime();
}
}

// RENDER
function render(){

// REGISTRO
document.getElementById('tableBody').innerHTML =
data.map(d=>`
<tr>
<td>${d.g}</td>
<td>${d.h}</td>
<td>${d.b}</td>
<td>${d.r}</td>
</tr>
`).join('');

// FILTRO DESVIOS
let devs = data.filter(d=>d.b=="1");

// ACCIONES
document.getElementById('actionsBody').innerHTML =
devs.map(d=>`
<tr>

<td style="text-align:left">

<b>Garrón ${d.g}</b><br><br>

<select>
<option>Lado</option>
<option>Izquierdo</option>
<option>Derecho</option>
</select><br><br>

<select>
<option>Ubicación</option>
<option>Culata</option>
<option>Nalga - Bola de lomo</option>
<option>Bifes - Cuadril</option>
<option>Pecho - Matambre - Ijada</option>
<option>Lomo - Costillas</option>
<option>Brazuelo - Cogote</option>
<option>Marucha - Paleta</option>
<option>Vacío - Entraña</option>
</select>

</td>

<td>${d.h}</td>
<td><textarea></textarea></td>
<td><input type="time"></td>
<td><textarea></textarea></td>
<td><textarea></textarea></td>
<td><input></td>

</tr>
`).join('');

document.getElementById('in-g').value = data.length+1;
}

</script>

</body>
</html>