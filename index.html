<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PCC1</title>

<style>
body{font-family:Arial;margin:10px;background:#f3f4f6}

/* ENCABEZADO */
.encabezado table{width:100%;border-collapse:collapse;background:#fff;margin-bottom:10px}
.encabezado td{border:2px solid #000;padding:6px}
.logo{text-align:center;width:20%}
.titulo{text-align:center;width:60%;font-size:13px}
.info{text-align:center;width:20%;background:#cfefff;font-size:12px}

/* BOTONES */
.toolbar{display:flex;gap:8px;margin-bottom:10px}
button{padding:10px;border:none;border-radius:10px;font-weight:bold;cursor:pointer}
.blue{background:#2563eb;color:#fff}
.green{background:#16a34a;color:#fff}
.red{background:#ef4444;color:#fff}

/* FORM */
.card{background:#fff;padding:10px;border-radius:10px;display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
label{font-size:11px;font-weight:bold}
input,select{padding:8px;border-radius:8px;border:1px solid #ccc}

/* TABLA */
table{width:100%;border-collapse:collapse;background:#fff}
th,td{border:1px solid #ccc;padding:6px;text-align:center;font-size:13px}
th{background:#eee}

/* BOTONES MINI */
.mini{padding:6px 8px;border-radius:6px;color:#fff;border:none;font-size:11px}
.mini.blue{background:#2563eb}
.mini.red{background:#ef4444}

/* DISCRETO */
.switch{display:flex;align-items:center;gap:6px;font-size:12px;color:#555}
</style>
</head>

<body>

<div class="encabezado">
<table>
<tr>
<td class="logo"><img src="logo.jpg" width="100"></td>
<td class="titulo">
<b>SISTEMA DE GESTI√ìN DE CALIDAD</b><br>
INSPECCI√ìN DE CARCASAS<br>
<b>PCC1</b>
</td>
<td class="info">
Emisi√≥n: 23/02/2026<br>
Rev: 12
</td>
</tr>
</table>
</div>

<div class="toolbar">
<button class="blue" onclick="capTime()">Hora</button>
<button class="green" onclick="finalizarDia()">Finalizar</button>
<button class="red" onclick="clearAll()">Borrar</button>
</div>

<div class="card">
<div>
<label>Garr√≥n</label>
<input id="garron" readonly>
</div>

<div>
<label>Hora</label>
<input type="time" id="hora">

<div class="switch">
<input type="checkbox" id="autoHora" onchange="toggleAutoHora()">
<span id="autoTxt">Manual</span>
</div>

</div>

<div>
<label>Desv√≠o</label>
<select id="desvio">
<option>0</option>
<option>1</option>
</select>
</div>

<div>
<label>Resp</label>
<select id="resp" onchange="guardar()">
<option value="">-</option>
<option>MQ</option>
<option>MD</option>
<option>WC</option>
<option>DE</option>
<option>AA</option>
</select>
</div>
</div>

<table>
<thead>
<tr>
<th>G</th>
<th>Hora</th>
<th>0/1</th>
<th>Resp</th>
<th>Acci√≥n</th>
</tr>
</thead>
<tbody id="tabla"></tbody>
</table>

<script>

let data = JSON.parse(localStorage.getItem("pcc1")||"[]");

function save(){
localStorage.setItem("pcc1",JSON.stringify(data));
}

function capTime(){
let d=new Date();
hora.value=d.toTimeString().slice(0,5);
}

function toggleAutoHora(){
let on=autoHora.checked;
autoTxt.innerText=on?"Auto":"Manual";
hora.disabled=on;
render();
}

function guardar(){
if(autoHora.checked) capTime();

data.push({
g:data.length+1,
h:hora.value,
d:desvio.value,
r:resp.value
});

resp.value="";
save();
update();
render();
}

function update(){
garron.value=data.length+1;
}

function render(){
tabla.innerHTML=data.map((x,i)=>`
<tr>
<td>${x.g}</td>
<td>${x.h}</td>
<td>${x.d}</td>
<td>${x.r}</td>
<td>
<button class="mini blue" onclick="edit(${i})" ${autoHora.checked?"disabled style='opacity:.3'":""}>‚úèÔ∏è</button>
<button class="mini red" onclick="del(${i})" ${autoHora.checked?"disabled style='opacity:.3'":""}>üóëÔ∏è</button>
</td>
</tr>
`).join("");
}

function edit(i){
if(autoHora.checked) return;
let n=prompt("Editar",data[i].g);
if(n) data[i].g=n;
save();
render();
}

function del(i){
if(autoHora.checked) return;
data.splice(i,1);
save();
update();
render();
}

function clearAll(){
if(confirm("Borrar todo?")){
data=[];
save();
update();
render();
}
}

function finalizarDia(){
alert("D√≠a guardado");
}

update();
render();

</script>

</body>
</html>